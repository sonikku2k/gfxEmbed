//
//                main.c - Main Code File
//                Project: gfxEmbed
//
//                Main test application that implements tests for the gfxEmbed library
//                This application runs tests against the library on a MSP-EXP430G2ET Launchpad
//
//----------------------------------------------------------------------------------------------------------------------
#include <msp430.h>
#include "timer.h"
#include "gfxEmbedLib/gfxEmbedLib.h"          // Include embedded graphics library
#include "gfxEmbedLib/fonts/hitachi5x7.h"     // Include font as header file




// Definitions and const variables
//------------------------------------------

const uint8_t Testbmp []={
			0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x80,0x80,0xC0,0x60,0x20,0x10,
			0x10,0x08,0x08,0x04,0x04,0x04,0x04,0x06,0x02,0x02,0x02,0x02,0x06,0x04,0x04,0x04,
			0x0C,0x88,0x98,0x90,0xB0,0xE0,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x0F,0x38,0xE0,0x20,0x31,0x11,0x11,0x98,0x18,0x10,0x10,0x30,
			0xE0,0x80,0xF0,0x10,0x10,0x10,0x10,0xF0,0x00,0x80,0x80,0x80,0x80,0x80,0x06,0x07,
			0x0D,0x09,0x08,0x18,0x10,0x30,0xE0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0xC7,0x64,0x34,0x14,0x0F,0x07,0x03,0x60,0x60,0x70,
			0x58,0xC7,0xFF,0x00,0x00,0x00,0x00,0xCF,0x03,0x01,0x00,0x38,0xCC,0x83,0x00,0x08,
			0x1C,0x34,0x24,0x66,0xC2,0x82,0x02,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x04,0x04,0x04,0x04,0x0C,0x0C,0x14,0x14,0x14,
			0x14,0x17,0x17,0x14,0x14,0x14,0x0C,0x0F,0x07,0x04,0x04,0x04,0x04,0x07,0x04,0x04,
			0x04,0x04,0x04,0x08,0x08,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
			};




//------------------------------------------- Code development area ---------------------------------------------------------------------------------

//#define toggle ^=
//#define clear &= ~
//#define set |=
//#define CSEL(y, x)  (P1 ##x y BIT0)

//------------------------------------------- Main Function -----------------------------------------------------------------------------------------
int main(void){
  
  
  WDTCTL = WDTPW | WDTHOLD;   // stop watchdog timer

    // Configure and calibrate system clock
    //--------------------------------------
    DCOCTL = 0;                                  // Select lowest DCOx and MODx settings
    BCSCTL1 = CALBC1_1MHZ;                       // Set range
    DCOCTL = CALDCO_1MHZ;                        // Set DCO step + modulation */
    BCSCTL2 = 0x00;



    // Configure ports
    //------------------
    P1DIR = 0xFF;                               // P1.0 is connected to the leftmost green LED
    P1OUT = 0x00;


    // Configure WDT as systick timer
    //--------------------------------

    WDTCTL = WDT_MDLY_0_5 ;                     // Enable WDT with period of 500uS
    IE1 |= WDTIE;                               // Enable WDT interrupt
    __enable_interrupt();                       // Enable System interrupts
    InitTimerSystem();

    Init_gfx();                                 // Initialize graphics driver
    Put_graphic(Testbmp);
	Delay(1000);
//	Clear_Display();
	
    Set_Font(Hitachi);                 // Tell the driver which font is to be used
	Set_Location( 50, 0);
	Print_Text("SONIC2K INDUSTRIES");
	Set_Location (50, 1);
	Print_Text("Got Rings??");
	Set_Location(50, 2);
	Print_Text("Go to sonic2k.com");
	

    





    for(;;){
      Delay (100);
    }
}


// Watchdog Timer interrupt service routine
// Used here as a system timer
// Period is 65.6 uS
//---------------------------------------------------
#pragma vector=WDT_VECTOR
__interrupt void watchdog_timer(void){

    CallInISR();

}
